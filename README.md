# 六爻算卦 Streamlit 版本

基于PyQt版本转换的Streamlit网页版六爻算卦系统，集成AI智能分析功能。

## 📋 项目简介

这是一个传统的六爻算卦系统，提供三种起卦方法和AI智能分析：
- **时间起卦**：根据当前年、月、日、时自动计算卦象
- **铜钱起卦**：模拟传统三枚铜钱摇卦过程，配有精美动画效果
- **数字起卦**：通过输入数字进行起卦，支持2个或3个数字模式
- **AI智能分析**：基于大语言模型的深度卦象解读和人生指导

## 🚀 快速开始

### 1. 安装依赖

```bash
pip install -r requirements.txt
```

### 2. 运行应用

```bash
streamlit run streamlit_app.py
```

或者使用Python运行：

```bash
python -m streamlit run streamlit_app.py
```

### 3. 访问应用

打开浏览器访问：`http://localhost:8501`

## 🎯 功能特点

### 时间起卦
- 根据当前时间自动计算上卦、下卦和动爻
- 快速便捷，适合即时占卜
- 显示详细的卦象分析

### 铜钱起卦（全新动画体验）
- 🎬 **精美动画效果**：真实模拟铜钱摇晃、翻转、落地过程
- 🪙 **视觉化体验**：三枚铜钱的摇晃、翻转动画，增强沉浸感
- 📊 **实时进度显示**：动态进度条显示起卦进度（1/6 到 6/6）
- 🎯 **传统起卦方式**：需要摇6次，每次对应一爻
- ✨ **结果展示**：每爻摇卦结果实时显示，包含铜钱面向和爻性
- 🔄 **状态管理**：智能状态切换，从摇晃到翻转到结果显示

### 数字起卦
- 支持2个或3个数字起卦模式
- 2个数字：第一个为上卦，第二个为下卦，两数相加除以6取动爻
- 3个数字：第一个为上卦，第二个为下卦，第三个直接作为动爻
- 适合面对面起卦，增加随机性

### AI智能分析（核心功能）
- 🤖 **深度解读**：基于大语言模型的专业卦象分析
- 📝 **结构化分析**：包含卦象基本含义、本卦与变卦关系、动爻分析等
- 🎯 **问题导向**：可针对具体问题进行深入分析和建议
- 💡 **实用指导**：提供具体可操作的解决方案和行动建议
- 🔮 **六神六亲**：结合传统六爻理论的综合分析
- 📊 **流式输出**：实时显示AI分析过程，提升用户体验

### 结果展示
- **本卦**：显示当前状况的卦象
- **变卦**：显示未来发展趋势的卦象
- **详细信息**：包含完整的起卦过程和分析
- **历史记录**：保存起卦历史，方便回顾

## 📱 界面说明

### 主页功能
- **起卦方法选择**：三种起卦方式的详细介绍和操作
- **动画效果**：铜钱起卦的精美动画展示
- **结果展示**：卦象、爻线、动爻的可视化显示
- **历史记录**：起卦历史的完整记录

### AI智能分析页面
- **卦象导入**：自动读取主页的起卦结果
- **问题输入**：可输入具体问题进行针对性分析
- **分析结果**：结构化的AI分析报告
- **流式显示**：实时展示AI思考和分析过程

### 卦象显示
- 使用传统爻线符号（━━━ 表示阳爻，━ ━ 表示阴爻）
- 动爻用红色高亮显示
- 清晰的卦名和上下卦标识
- 六神六亲配置完整显示

## 🔮 算法原理

### 时间起卦算法
1. **上卦计算**：(年尾数 + 月 + 日) ÷ 8 的余数
2. **下卦计算**：(年尾数 + 月 + 日 + 时) ÷ 8 的余数
3. **动爻计算**：(年尾数 + 月 + 日 + 时) ÷ 6 的余数

### 铜钱起卦算法
- 三枚铜钱投掷结果：
  - 1阴2阳：少阳（━━━）
  - 2阴1阳：少阴（━ ━）
  - 3阴：老阳（━━━，动爻）
  - 3阳：老阴（━ ━，动爻）

### 数字起卦算法
- **2数字模式**：上卦 = 数字1 % 8，下卦 = 数字2 % 8，动爻 = (数字1 + 数字2) % 6
- **3数字模式**：上卦 = 数字1 % 8，下卦 = 数字2 % 8，动爻 = 数字3 % 6

### 变卦逻辑
- 动爻阴阳互变
- 重新分析上下卦组合
- 得到变卦卦象

### AI分析算法
- 基于大语言模型的深度语义理解
- 结合传统六爻理论的结构化分析
- 问题导向的个性化解读

### 文件结构
```
liuyao_streamlit/
├── streamlit_app.py              # 主应用入口
├── requirements.txt              # 依赖包列表
├── README.md                     # 项目说明文档
├── pages/                        # 页面目录
│   ├── 主页.py                   # 主页面（起卦功能）
│   └── AI智能分析.py             # AI分析页面
├── yijing_core.py               # 易经核心算法
├── liuyao_data_extractor.py     # 六爻数据提取器
├── 提示词模板.md                # AI提示词模板
└── pycache /                 # Python缓存目录

```


## 🛠️ 技术栈

- **前端框架**：Streamlit
- **核心算法**：Python原生实现
- **样式设计**：CSS3 + HTML5 动画
- **AI集成**：大语言模型API
- **数据存储**：Streamlit Session State
- **动画效果**：CSS3 关键帧动画

## 📝 使用说明

### 首次使用
1. 选择起卦方法（推荐先尝试时间起卦）
2. 点击起卦按钮
3. 查看结果分析
4. 前往AI智能分析页面获取深度解读

### 铜钱起卦步骤
1. 选择"铜钱起卦"方法
2. 点击"开始铜钱起卦"
3. 观看铜钱摇晃动画，等待自动翻转
4. 查看每爻的摇卦结果
5. 重复6次完成整个起卦过程
6. 查看完整的起卦结果

### AI智能分析使用
1. 在主页完成起卦
2. 切换到"AI智能分析"页面
3. （可选）输入具体问题
4. 点击"开始AI分析"
5. 观看实时分析过程
6. 查看完整的分析报告

### 结果解读
- **本卦**：代表当前的状况和问题
- **变卦**：代表未来的发展趋势
- **动爻**：变化的关键因素，需要重点关注
- **AI分析**：专业的解读和人生指导建议

## ⚠️ 注意事项

1. **仅供娱乐参考**：本应用基于传统易经文化，仅供文化体验和娱乐参考
2. **理性看待**：请理性看待占卜结果，不要过度依赖
3. **文化传承**：旨在传承和弘扬中华传统文化
4. **AI分析**：AI分析结果仅供参考，请结合实际情况理性判断
5. **网络连接**：AI分析功能需要稳定的网络连接

## 🔄 更新日志

### v2.0.0 (2025-08-29)
- 🎬 **新增铜钱动画效果**：精美的摇晃、翻转、落地动画
- 🤖 **新增AI智能分析**：基于大语言模型的深度卦象解读
- 📊 **优化用户界面**：更美观的进度条和状态显示
- 🔄 **改进状态管理**：更稳定的动画状态切换
- 📝 **完善文档**：更详细的使用说明和功能介绍

### v1.0.1 (2025-07-26)
- ✨ 新增数字起卦功能
- ✨ 优化数字起卦和铜钱起卦的变卦逻辑
- ✨ 统一铜钱起卦历史记录和详细信息的显示顺序（从第六爻到第一爻）
- ✨ 修复数字起卦详细信息中起卦方法显示错误的问题

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 项目Issues：[GitHub Issues]
- 邮箱：[ckdavid233@163.com]

## 📄 许可证

本项目采用 MIT 许可证。详情请参阅 LICENSE 文件。

---

🔮 **愿易经智慧为您指引方向，AI助力人生决策** 🔮